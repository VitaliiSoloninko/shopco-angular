<div class="product-detail-container">
  <div class="product-layout">
    <!-- Product Image -->

    <div class="product-image">
      <img [src]="getImageUrl(product?.img || '')" alt="{{ product?.name }}" />
    </div>

    <!-- Product Info -->
    <div class="product-info-section">
      <h1 class="product-title">{{ product?.name }}</h1>

      <!-- Rating -->
      <div class="rating-section">
        <div class="stars">
          @for (star of [1,2,3,4,5]; track star) {
            <span class="star" [class.filled]="star <= (product?.rating || 0)">â˜…</span>
          }
        </div>
        <span class="rating-text">{{ product?.rating || 0 }}/5</span>
      </div>

      <!-- Price -->
      <div class="price-section">
        <span class="current-price">${{ currentPrice }}</span>
        <span class="original-price">${{ originalPrice }}</span>
        <span class="discount">-{{ discount }}%</span>
      </div>

      <!-- Description -->
      <p class="product-description">
        This graphic t-shirt which is perfect for any occasion. Crafted from a
        soft and breathable fabric, it offers superior comfort and style.
      </p>

      <!-- Product Details -->
      @if (product?.brand || product?.type) {
        <div class="product-details">
          @if (product?.brand) {
            <div class="detail-item">
              <span class="detail-label">Brand:</span>
              <span class="detail-value">{{ product?.brand?.name }}</span>
            </div>
          }
          @if (product?.type) {
            <div class="detail-item">
              <span class="detail-label">Style:</span>
              <span class="detail-value">{{ product?.type?.name }}</span>
            </div>
          }
        </div>
      }

      <app-gray-line></app-gray-line>

      <app-size-selector
        [sizes]="sizes"
        [selectedSize]="selectedSize"
        (sizeSelected)="onSizeSelected($event)"
      ></app-size-selector>

      <app-gray-line></app-gray-line>

      <div class="cart-section">
        <app-quantity-control
          [quantity]="quantity"
          [minQuantity]="1"
          [maxQuantity]="100"
          size="big"
          (quantityChange)="onQuantityChange($event)"
        ></app-quantity-control>

        <button class="add-to-cart-btn" (click)="addToCart()">
          Add to Cart
        </button>
      </div>
    </div>
  </div>
</div>

<app-cart-toast
  [isOpen]="isToastOpen"
  (close)="onToastClose()"
  (checkout)="goToCart()"
>
</app-cart-toast>
